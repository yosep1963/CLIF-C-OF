# CLIF-C OF & ACLF Diagnosis Calculator 개발 요청

## 1. 앱 개요
- **목적**: 간경변 환자의 장기부전(OF) 평가 및 ACLF 등급 진단
- **기술 스택**: React 또는 Vanilla JS 기반 PWA (Netlify 배포용)
- **핵심 기능**: 실시간 입력 검증, ACLF 등급 자동 판정, 오프라인 사용 가능

## 2. CLIF-C OF 점수 및 장기부전 정의
각 장기별로 1~3점을 부여하며, **3점인 경우 해당 장기의 '장기부전(Failure)'**으로 간주함.

| 장기 | 지표 | 1점 | 2점 | 3점 (Failure) |
| :--- | :--- | :--- | :--- | :--- |
| **간** | Bilirubin (mg/dL) | <6 | 6 - <12 | ≥12 |
| **신장** | Creatinine (mg/dL) | <2 | 2 - <3.5 | ≥3.5 또는 RRT(Dialysis) |
| **뇌** | HE grade (West-Haven) | 0 | 1-2 | 3-4 |
| **응고** | INR | <2.0 | 2.0 - <2.5 | ≥2.5 |
| **순환** | MAP (mmHg) | ≥70 | <70 | 승압제(Vasopressors) 사용 |
| **호흡** | PaO₂/FiO₂ | >300 | 201 - 300 | ≤200 |

## 3. ACLF 진단 로직 (중요)
앱은 다음 우선순위에 따라 등급을 결정해야 함:

1. **ACLF-3**: 장기부전(3점) 개수 ≥ 3개
2. **ACLF-2**: 장기부전(3점) 개수 == 2개
3. **ACLF-1**: 장기부전이 1개인 경우. 단, 다음의 특수 상황을 포함함:
   - **신부전 기준**: 신장 점수가 3점(Cr ≥3.5 또는 RRT)인 경우
   - **기타 장기부전 1개**가 있으면서 + 신기능 장애(Cr 1.5~1.9)가 동반된 경우
   - **기타 장기부전 1개**가 있으면서 + 경도 간성뇌증(HE grade 1~2)이 동반된 경우
   - **단독 신부전(Cr 2.0~3.4)**인 경우 (장기부전 점수는 2점이지만 ACLF-1로 분류)
4. **No ACLF**: 위 기준에 해당하지 않는 경우

## 4. 입력 항목 및 UI
- **입력 방식**: 모바일 최적화된 큰 버튼과 숫자 입력 키패드
- **간**: Bilirubin (숫자)
- **신장**: Creatinine (숫자), RRT 여부 (토글 스위치)
- **뇌**: HE Grade (0 / 1-2 / 3-4 선택형 버튼)
- **응고**: INR (숫자)
- **순환**: MAP (숫자), 승압제 사용 여부 (토글 스위치)
- **호흡**: PaO₂/FiO₂ (직접 입력 또는 PaO₂와 FiO₂를 각각 입력하여 계산하는 옵션 제공)

## 5. 결과 출력
- **종합 진단**: "ACLF-1 (단독 신부전 기준)" 처럼 근거를 함께 표시
- **위험도**: 28일 사망률 수치와 위험도 색상(초록/노랑/빨강) 적용
- **장기별 요약**: 6개 장기의 상태를 카드 형태로 보여주고, 부전이 있는 장기는 'Warning' 아이콘 표시
- **Next Step 추천**: ACLF로 진단될 경우, "정밀 예후 측정을 위해 CLIF-C ACLF Score 계산기로 이동" 버튼 노출 (Age, WBC 입력창으로 연결)

## 6. 기술 요구사항
- **PWA 구현**: manifest.json, service-worker.js (오프라인 캐싱)
- **유효성 검사**: 
  - Bilirubin (0.1~50), Cr (0.1~15), INR (0.5~10), MAP (30~150), PaO₂/FiO₂ (50~600)
  - 범위 초과 시 "입력값을 확인하세요" 메시지 출력
- **저장 기능**: 최근 10개의 진단 기록을 브라우저에 저장하고 불러오기

## 7. 폴더 구조
- `/src` 내에 `App.js`, `logic.js` (계산 로직 분리), `DiagnosticHistory.js` 등으로 구성
- Netlify 배포용 설정 포함
